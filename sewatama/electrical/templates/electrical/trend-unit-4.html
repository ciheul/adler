{% extends "base.html" %}

{% block content %}
<div class="my-container">
  {% include "sidenav-inc.html" %}
  <div id="content">
    <h3>Trend</h3>

    <ul class="nav nav-tabs">
      <li><a href="{% url 'trend-unit-1' %}">Unit #1</a></li>
      <li><a href="{% url 'trend-unit-2' %}">Unit #2</a></li>
      <li><a href="{% url 'trend-unit-3' %}">Unit #3</a></li>
      <li class="active"><a href="#"><b>Unit #4</b></a></li>
    </ul>

    <br>

    <div id="grid-0" class="gridster">
      <ul>
      </ul>
    </div>

  </div>
</div>
{% endblock %}

{% block javascript %}
<script src="/static/electrical/backboneapp/bower_components/highcharts/highstock.js"></script>

<script>
  var app = app || {};
  
  app.TrendView = Backbone.View.extend({
    initialize: function() {
      app.widgets = new app.WidgetList();
      app.widgets.url = '/electrical/api/trend-unit-4/';
  
      app.widgets.fetch({ async: false });
      this.render();
    },
  
    render: function() {
      app.widgets.each(function(widget) {
        widget.set({ page: 'trend-unit-4' });
        var widgetView = new app.RealTimeChartView({
          el: $('#grid-0 > ul'),
          model: widget.toJSON()
        });
        widgetView.render();
      });
    },
  });
  
  app.trendView = new app.TrendView();
  
  var gridster = [];
  
  gridster[0] = $("#grid-0 ul")
    .gridster({
      namespace: '#grid-0',
      widget_margins: [5, 5],
      widget_base_dimensions: [90, 20],
      min_cols: 12,
      max_cols: 12,
      max_size_x: 12})
    .data('gridster')
    .disable();
</script>
{% endblock %}
