{% extends "base.html" %}

{% block content %}
<div class="my-container">
  {% include "sidenav-inc.html" %}
  <div id="content">
    <div class="row">
      <div class="col-md-9"><h3>Genset<span id="notif-log"></span></h3></div>
      <div class="col-md-3">
        <div class="alert page-notif" style="display:none;">
          <div id="notif-status">
              <span id="notif-status-icon"><span class="glyphicon glyphicon-ok">&nbsp;</span></span>
            <span id="notif-content">LAST UPDATE: RECENTLY</span>
            <a id="notif-closer">Ã—</a>
          </div>
        </div>
      </div>
    </div>

    <ul class="nav nav-tabs">
      <li class="active"><a href="#"><b>Overview Outgoing #1</b></a></li>
      {# <li><a href="{% url 'genset-overview-outgoing-2' %}">Overview Outgoing #2</a></li> #}
      <li><a href="{% url 'genset-outgoing-1-unit-1' %}">Outgoing #1</a></li>
      {# <li><a href="{% url 'genset-outgoing-2-unit-1' %}">Outgoing #2</a></li> #}
    </ul>

    <br>
    
    <div id="genset-1" class="gridster">
      <ul>
        <li data-row="1" data-col="1" data-sizex="3" data-sizey="14">
          <table class="table">
            <tr><td class="widget-head" colspan="3"><b>GENSET #1</b></td></tr>
            <tr><td colspan="3"><img src="/static/electrical/images/generator.bmp" /></td></tr>
            <tr style="font-size:12px"><td>VOLT. AVRG</td><td id="genset-1-volt-avrg">#NA</td><td>V</td></tr>
            <tr style="font-size:12px"><td>VOLT. L-N AVRG</td><td id="genset-1-volt-lnavrg">#NA</td><td>V</td></tr>
            <tr style="font-size:12px"><td>CURRENT AVRG</td><td id="genset-1-current-avrg">#NA</td><td>A</td></tr>
            <tr style="font-size:12px"><td>FREQUENCY</td><td id="genset-1-frequency">#NA</td><td>Hz</td></tr>
            <tr style="font-size:12px"><td>POWER FACT.</td><td id="genset-1-power-fact">#NA</td><td></td></tr>
            <tr style="font-size:12px"><td>REAL POWER</td><td id="genset-1-real-power">#NA</td><td>kW</td></tr>
            <tr style="font-size:12px"><td>ENERGY EXPORT</td><td id="genset-1-energy-export">#NA</td><td>kWh</td></tr>
            <tr style="font-size:12px"><td>BATTERY</td><td id="genset-1-battery">#NA</td><td>V</td></tr>
          </table>
        </li>

        <li data-row="1" data-col="2" data-sizex="3" data-sizey="14">
          <table class="table">
            <tr><td class="widget-head" colspan="3"><b>GENSET #2</b></td></tr>
            <tr><td colspan="3"><img src="/static/electrical/images/generator.bmp" /></td></tr>
            <tr style="font-size:12px"><td>VOLT. AVRG</td><td id="genset-2-volt-avrg">#NA</td><td>V</td></tr>
            <tr style="font-size:12px"><td>VOLT. L-N AVRG</td><td id="genset-2-volt-lnavrg">#NA</td><td>V</td></tr>
            <tr style="font-size:12px"><td>CURRENT AVRG</td><td id="genset-2-current-avrg">#NA</td><td>A</td></tr>
            <tr style="font-size:12px"><td>FREQUENCY</td><td id="genset-2-frequency">#NA</td><td>Hz</td></tr>
            <tr style="font-size:12px"><td>POWER FACT.</td><td id="genset-2-power-fact">#NA</td><td></td></tr>
            <tr style="font-size:12px"><td>REAL POWER</td><td id="genset-2-real-power">#NA</td><td>kW</td></tr>
            <tr style="font-size:12px"><td>ENERGY EXPORT</td><td id="genset-2-energy-export">#NA</td><td>kWh</td></tr>
            <tr style="font-size:12px"><td>BATTERY</td><td id="genset-2-battery">#NA</td><td>V</td></tr>
          </table>
        </li>

        <li data-row="1" data-col="3" data-sizex="3" data-sizey="14">
          <table class="table">
            <tr><td class="widget-head" colspan="3"><b>GENSET #3</b></td></tr>
            <tr><td colspan="3"><img src="/static/electrical/images/generator.bmp" /></td></tr>
            <tr style="font-size:12px"><td>VOLT. AVRG</td><td id="genset-3-volt-avrg">#NA</td><td>V</td></tr>
            <tr style="font-size:12px"><td>VOLT. L-N AVRG</td><td id="genset-3-volt-lnavrg">#NA</td><td>V</td></tr>
            <tr style="font-size:12px"><td>CURRENT AVRG</td><td id="genset-3-current-avrg">#NA</td><td>A</td></tr>
            <tr style="font-size:12px"><td>FREQUENCY</td><td id="genset-3-frequency">#NA</td><td>Hz</td></tr>
            <tr style="font-size:12px"><td>POWER FACT.</td><td id="genset-3-power-fact">#NA</td><td></td></tr>
            <tr style="font-size:12px"><td>REAL POWER</td><td id="genset-3-real-power">#NA</td><td>kW</td></tr>
            <tr style="font-size:12px"><td>ENERGY EXPORT</td><td id="genset-3-energy-export">#NA</td><td>kWh</td></tr>
            <tr style="font-size:12px"><td>BATTERY</td><td id="genset-3-battery">#NA</td><td>V</td></tr>
          </table>
        </li>

        <li data-row="1" data-col="4" data-sizex="3" data-sizey="14">
          <table class="table">
            <tr><td class="widget-head" colspan="3"><b>GENSET #4</b></td></tr>
            <tr><td colspan="3"><img src="/static/electrical/images/generator.bmp" /></td></tr>
            <tr style="font-size:12px"><td>VOLT. AVRG</td><td id="genset-4-volt-avrg">#NA</td><td>V</td></tr>
            <tr style="font-size:12px"><td>VOLT. L-N AVRG</td><td id="genset-4-volt-lnavrg">#NA</td><td>V</td></tr>
            <tr style="font-size:12px"><td>CURRENT AVRG</td><td id="genset-4-current-avrg">#NA</td><td>A</td></tr>
            <tr style="font-size:12px"><td>FREQUENCY</td><td id="genset-4-frequency">#NA</td><td>Hz</td></tr>
            <tr style="font-size:12px"><td>POWER FACT.</td><td id="genset-4-power-fact">#NA</td><td></td></tr>
            <tr style="font-size:12px"><td>REAL POWER</td><td id="genset-4-real-power">#NA</td><td>kW</td></tr>
            <tr style="font-size:12px"><td>ENERGY EXPORT</td><td id="genset-4-energy-export">#NA</td><td>kWh</td></tr>
            <tr style="font-size:12px"><td>BATTERY</td><td id="genset-4-battery">#NA</td><td>V</td></tr>
          </table>
        </li>

        <!--
        <li data-row="2" data-col="1" data-sizex="3" data-sizey="14">
          <table class="table">
            <tr><td class="widget-head" colspan="3"><b>GENSET #5</b></td></tr>
            <tr><td colspan="3"><img src="/static/electrical/images/generator.bmp" /></td></tr>
            <tr style="font-size:12px"><td>VOLT. AVRG</td><td>#NA</td><td>V</td></tr>
            <tr style="font-size:12px"><td>VOLT. L-N AVRG</td><td>#NA</td><td>V</td></tr>
            <tr style="font-size:12px"><td>CURRENT AVRG</td><td>#NA</td><td>A</td></tr>
            <tr style="font-size:12px"><td>FREQUENCY</td><td>#NA</td><td>Hz</td></tr>
            <tr style="font-size:12px"><td>POWER FACT.</td><td>#NA</td><td></td></tr>
            <tr style="font-size:12px"><td>REAL POWER</td><td>#NA</td><td>kW</td></tr>
            <tr style="font-size:12px"><td>ENERGY EXPORT</td><td>#NA</td><td>kWh</td></tr>
            <tr style="font-size:12px"><td>BATTERY</td><td>#NA</td><td>V</td></tr>
          </table>
        </li>

        <li data-row="2" data-col="2" data-sizex="3" data-sizey="14">
          <table class="table">
            <tr><td class="widget-head" colspan="3"><b>GENSET #6</b></td></tr>
            <tr><td colspan="3"><img src="/static/electrical/images/generator.bmp" /></td></tr>
            <tr style="font-size:12px"><td>VOLT. AVRG</td><td>#NA</td><td>V</td></tr>
            <tr style="font-size:12px"><td>VOLT. L-N AVRG</td><td>#NA</td><td>V</td></tr>
            <tr style="font-size:12px"><td>CURRENT AVRG</td><td>#NA</td><td>A</td></tr>
            <tr style="font-size:12px"><td>FREQUENCY</td><td>#NA</td><td>Hz</td></tr>
            <tr style="font-size:12px"><td>POWER FACT.</td><td>#NA</td><td></td></tr>
            <tr style="font-size:12px"><td>REAL POWER</td><td>#NA</td><td>kW</td></tr>
            <tr style="font-size:12px"><td>ENERGY EXPORT</td><td>#NA</td><td>kWh</td></tr>
            <tr style="font-size:12px"><td>BATTERY</td><td>#NA</td><td>V</td></tr>
          </table>
        </li>

        <li data-row="2" data-col="3" data-sizex="3" data-sizey="14">
          <table class="table">
            <tr><td class="widget-head" colspan="3"><b>GENSET #7</b></td></tr>
            <tr><td colspan="3"><img src="/static/electrical/images/generator.bmp" /></td></tr>
            <tr style="font-size:12px"><td>VOLT. AVRG</td><td>#NA</td><td>V</td></tr>
            <tr style="font-size:12px"><td>VOLT. L-N AVRG</td><td>#NA</td><td>V</td></tr>
            <tr style="font-size:12px"><td>CURRENT AVRG</td><td>#NA</td><td>A</td></tr>
            <tr style="font-size:12px"><td>FREQUENCY</td><td>#NA</td><td>Hz</td></tr>
            <tr style="font-size:12px"><td>POWER FACT.</td><td>#NA</td><td></td></tr>
            <tr style="font-size:12px"><td>REAL POWER</td><td>#NA</td><td>kW</td></tr>
            <tr style="font-size:12px"><td>ENERGY EXPORT</td><td>#NA</td><td>kWh</td></tr>
            <tr style="font-size:12px"><td>BATTERY</td><td>#NA</td><td>V</td></tr>
          </table>
        </li>

        <li data-row="2" data-col="4" data-sizex="3" data-sizey="14">
          <table class="table">
            <tr><td class="widget-head" colspan="3"><b>GENSET #8</b></td></tr>
            <tr><td colspan="3"><img src="/static/electrical/images/generator.bmp" /></td></tr>
            <tr style="font-size:12px"><td>VOLT. AVRG</td><td>#NA</td><td>V</td></tr>
            <tr style="font-size:12px"><td>VOLT. L-N AVRG</td><td>#NA</td><td>V</td></tr>
            <tr style="font-size:12px"><td>CURRENT AVRG</td><td>#NA</td><td>A</td></tr>
            <tr style="font-size:12px"><td>FREQUENCY</td><td>#NA</td><td>Hz</td></tr>
            <tr style="font-size:12px"><td>POWER FACT.</td><td>#NA</td><td></td></tr>
            <tr style="font-size:12px"><td>REAL POWER</td><td>#NA</td><td>kW</td></tr>
            <tr style="font-size:12px"><td>ENERGY EXPORT</td><td>#NA</td><td>kWh</td></tr>
            <tr style="font-size:12px"><td>BATTERY</td><td>#NA</td><td>V</td></tr>
          </table>
        </li>

        <li data-row="3" data-col="1" data-sizex="3" data-sizey="14">
          <table class="table">
            <tr><td class="widget-head" colspan="3"><b>GENSET #9</b></td></tr>
            <tr><td colspan="3"><img src="/static/electrical/images/generator.bmp" /></td></tr>
            <tr style="font-size:12px"><td>VOLT. AVRG</td><td>#NA</td><td>V</td></tr>
            <tr style="font-size:12px"><td>VOLT. L-N AVRG</td><td>#NA</td><td>V</td></tr>
            <tr style="font-size:12px"><td>CURRENT AVRG</td><td>#NA</td><td>A</td></tr>
            <tr style="font-size:12px"><td>FREQUENCY</td><td>#NA</td><td>Hz</td></tr>
            <tr style="font-size:12px"><td>POWER FACT.</td><td>#NA</td><td></td></tr>
            <tr style="font-size:12px"><td>REAL POWER</td><td>#NA</td><td>kW</td></tr>
            <tr style="font-size:12px"><td>ENERGY EXPORT</td><td>#NA</td><td>kWh</td></tr>
            <tr style="font-size:12px"><td>BATTERY</td><td>#NA</td><td>V</td></tr>
          </table>
        </li>

        <li data-row="3" data-col="2" data-sizex="3" data-sizey="14">
          <table class="table">
            <tr><td class="widget-head" colspan="3"><b>GENSET #10</b></td></tr>
            <tr><td colspan="3"><img src="/static/electrical/images/generator.bmp" /></td></tr>
            <tr style="font-size:12px"><td>VOLT. AVRG</td><td>#NA</td><td>V</td></tr>
            <tr style="font-size:12px"><td>VOLT. L-N AVRG</td><td>#NA</td><td>V</td></tr>
            <tr style="font-size:12px"><td>CURRENT AVRG</td><td>#NA</td><td>A</td></tr>
            <tr style="font-size:12px"><td>FREQUENCY</td><td>#NA</td><td>Hz</td></tr>
            <tr style="font-size:12px"><td>POWER FACT.</td><td>#NA</td><td></td></tr>
            <tr style="font-size:12px"><td>REAL POWER</td><td>#NA</td><td>kW</td></tr>
            <tr style="font-size:12px"><td>ENERGY EXPORT</td><td>#NA</td><td>kWh</td></tr>
            <tr style="font-size:12px"><td>BATTERY</td><td>#NA</td><td>V</td></tr>
          </table>
        </li>

        <li data-row="3" data-col="3" data-sizex="3" data-sizey="14">
          <table class="table">
            <tr><td class="widget-head" colspan="3"><b>GENSET #11</b></td></tr>
            <tr><td colspan="3"><img src="/static/electrical/images/generator.bmp" /></td></tr>
            <tr style="font-size:12px"><td>VOLT. AVRG</td><td>#NA</td><td>V</td></tr>
            <tr style="font-size:12px"><td>VOLT. L-N AVRG</td><td>#NA</td><td>V</td></tr>
            <tr style="font-size:12px"><td>CURRENT AVRG</td><td>#NA</td><td>A</td></tr>
            <tr style="font-size:12px"><td>FREQUENCY</td><td>#NA</td><td>Hz</td></tr>
            <tr style="font-size:12px"><td>POWER FACT.</td><td>#NA</td><td></td></tr>
            <tr style="font-size:12px"><td>REAL POWER</td><td>#NA</td><td>kW</td></tr>
            <tr style="font-size:12px"><td>ENERGY EXPORT</td><td>#NA</td><td>kWh</td></tr>
            <tr style="font-size:12px"><td>BATTERY</td><td>#NA</td><td>V</td></tr>
          </table>
        </li>
        -->

      </ul>
    </div>

{% endblock %}

{% block javascript %}
<script type="text/javascript" id="code">
  var gridster = [];

  $(function() {
    gridster[0] = $("#genset-1 ul")
      .gridster({
        namespace: '#genset-1',
        widget_margins: [5, 5],
        widget_base_dimensions: [90, 23],
        max_cols: 12,
        max_size_x: 12})
      .data('gridster')
      .disable();
  });

  $.ajax({
    url: '/electrical/api/genset-overview-outgoing-1/',
    method: 'get',
    success: function(result) {
      console.log(result);
      if (result.success === 0) {
        setWidget(result.data);
      }
    },
    error: function(result) {},
  });

  function setWidget(data) {
    // GENSET #1
    if (typeof data.obj1 !== 'undefined') {
      setPanelStatus('#genset-1-volt-avrg', data.obj1.Value);
    }

    if (typeof data.obj2 !== 'undefined') {
      setPanelStatus('#genset-1-volt-lnavrg', data.obj2.Value);
    }

    if (typeof data.obj3 !== 'undefined') {
      setPanelStatus('#genset-1-current-avrg', data.obj3.Value);
    }

    if (typeof data.obj4 !== 'undefined') {
      setPanelStatus('#genset-1-frequency', data.obj4.Value);
    }

    if (typeof data.obj5 !== 'undefined') {
      setPanelStatus('#genset-1-power-fact', data.obj5.Value);
    }

    if (typeof data.obj6 !== 'undefined') {
      setPanelStatus('#genset-1-real-power', data.obj6.Value);
    }

    if (typeof data.obj7 !== 'undefined') {
      setPanelStatus('#genset-1-energy-export', data.obj7.Value);
    }

    if (typeof data.obj8 !== 'undefined') {
      setPanelStatus('#genset-1-battery', data.obj8.Value);
    }

    // GENSET #2
    if (typeof data.obj9 !== 'undefined') {
      setPanelStatus('#genset-2-volt-avrg', data.obj9.Value);
    }

    if (typeof data.obj10 !== 'undefined') {
      setPanelStatus('#genset-2-volt-lnavrg', data.obj10.Value);
    }

    if (typeof data.obj11 !== 'undefined') {
      setPanelStatus('#genset-2-current-avrg', data.obj11.Value);
    }

    if (typeof data.obj12 !== 'undefined') {
      setPanelStatus('#genset-2-frequency', data.obj12.Value);
    }

    if (typeof data.obj13 !== 'undefined') {
      setPanelStatus('#genset-2-power-fact', data.obj13.Value);
    }

    if (typeof data.obj14 !== 'undefined') {
      setPanelStatus('#genset-2-real-power', data.obj14.Value);
    }

    if (typeof data.obj15 !== 'undefined') {
      setPanelStatus('#genset-2-energy-export', data.obj15.Value);
    }

    if (typeof data.obj16 !== 'undefined') {
      setPanelStatus('#genset-2-battery', data.obj16.Value);
    }

    // GENSET #3
    if (typeof data.obj17 !== 'undefined') {
      setPanelStatus('#genset-3-volt-avrg', data.obj17.Value);
    }

    if (typeof data.obj18 !== 'undefined') {
      setPanelStatus('#genset-3-volt-lnavrg', data.obj18.Value);
    }

    if (typeof data.obj19 !== 'undefined') {
      setPanelStatus('#genset-3-current-avrg', data.obj19.Value);
    }

    if (typeof data.obj20 !== 'undefined') {
      setPanelStatus('#genset-3-frequency', data.obj20.Value);
    }

    if (typeof data.obj21 !== 'undefined') {
      setPanelStatus('#genset-3-power-fact', data.obj21.Value);
    }

    if (typeof data.obj22 !== 'undefined') {
      setPanelStatus('#genset-3-real-power', data.obj22.Value);
    }

    if (typeof data.obj23 !== 'undefined') {
      setPanelStatus('#genset-3-energy-export', data.obj23.Value);
    }

    if (typeof data.obj24 !== 'undefined') {
      setPanelStatus('#genset-3-battery', data.obj24.Value);
    }

    // GENSET #4
    if (typeof data.obj25 !== 'undefined') {
      setPanelStatus('#genset-4-volt-avrg', data.obj25.Value);
    }

    if (typeof data.obj26 !== 'undefined') {
      setPanelStatus('#genset-4-volt-lnavrg', data.obj26.Value);
    }

    if (typeof data.obj27 !== 'undefined') {
      setPanelStatus('#genset-4-current-avrg', data.obj27.Value);
    }

    if (typeof data.obj28 !== 'undefined') {
      setPanelStatus('#genset-4-frequency', data.obj28.Value);
    }

    if (typeof data.obj29 !== 'undefined') {
      setPanelStatus('#genset-4-power-fact', data.obj29.Value);
    }

    if (typeof data.obj30 !== 'undefined') {
      setPanelStatus('#genset-4-real-power', data.obj30.Value);
    }

    if (typeof data.obj31 !== 'undefined') {
      setPanelStatus('#genset-4-energy-export', data.obj31.Value);
    }

    if (typeof data.obj32 !== 'undefined') {
      setPanelStatus('#genset-4-battery', data.obj32.Value);
    }

  }

  function setPanelStatus(id, status) {
    $(id).empty();
    $(id).append(Math.round(status * 100) / 100);
  }

</script>
{% endblock %}
